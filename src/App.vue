<template>
  <main class="layout">
    <div class="layout__start" v-if="stage === 0">
      <p class="layout__welcome">
        –ò–≥—Ä–∞ –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å–ª—É—á–∞–π–Ω—ã–º –æ–±—Ä–∞–∑–æ–º —Å–≤—è–∑–∞—Ç—å—Å—è —Å –í—Å–µ–ª–µ–Ω–Ω–æ–π –∏ –≤—ã–±—Ä–∞—Ç—å –¥–ª—è
        —Å–µ–±—è –∂–µ–ª–∞–Ω–∏—è –Ω–∞ –¥–µ–Ω—å ü•≥! –ü–æ—Å–ª–µ –Ω–∞—á–∞–ª–∞ –∏–≥—Ä—ã –±—É–¥–µ—Ç —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ —Å–≤—è–∑—å –º–µ–∂–¥—É
        –≤–∞–º–∏ –∏ –í—Å–µ–ª–µ–Ω–Ω–æ–π, –∑–∞—Ç–µ–º –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω–∞—è —ç–Ω–µ—Ä–≥–µ—Ç–∏–∫–∞ –±—É–¥–µ—Ç –Ω–∞–ø–æ–ª–Ω—è—Ç—å –≤–∞—à—É
        –∂–∏–∑–Ω—å –∏ —Ç–µ—Ö –∫—Ç–æ –≤–∞–º –¥–æ—Ä–æ–≥ üéÅ!
      </p>

      <Button @click="handleClick">–ù–∞—á–∞—Ç—å –∏–≥—Ä—É</Button>
    </div>

    <div class="layout__game" v-if="stage === 1">
      <Wishes @end="handleEnd" />
    </div>

    <div class="layout__ending" v-if="stage === 2">
      <p>
        –í—ã —Å–ª—É—á–∞–π–Ω—ã–º –æ–±—Ä–∞–∑–æ–º –≤—ã–±—Ä–∞–ª–∏ —Å–ª–µ–¥—É—é—â–∏–µ –∂–µ–ª–∞–Ω–∏—è, –í—Å–µ–ª–µ–Ω–Ω–∞—è –¥–∞—Ä–∏—Ç –∏—Ö –≤–∞–º
        –Ω–∞ –±–µ–∑–≤–æ–∑–º–µ–∑–¥–Ω–æ–º –æ—Å–Ω–æ–≤–∞–Ω–∏–∏!
      </p>

      <div
        class="layout__wish"
        v-for="(wish, index) in chosenWishes"
        :key="index"
      >
        {{ wish }}
      </div>
    </div>
  </main>
</template>

<script setup>
  import { ref, watch } from 'vue'
  import Button from '@/components/Button.vue'
  import Wishes from '@/components/Wishes.vue'

  const stage = ref(0)
  const chosenWishes = ref(null)

  const handleClick = (event) => {
    stage.value++
  }

  const handleEnd = (value) => {
    chosenWishes.value = [...new Set(value)]
    stage.value++
  }
</script>

<style lang="scss">
  main.layout {
    width: 100vw;
    height: 100vh;
    display: flex;
    align-items: center;
    justify-content: center;

    .layout__start {
      max-width: 20rem;
      text-align: justify;
      display: flex;
      flex-direction: column;
      justify-content: center;
    }

    .layout__game {
    }

    .layout__ending {
      width: 100vw;
      height: 100vh;
      padding: 1rem;
    }

    .layout__wish {
    }
  }
</style>
